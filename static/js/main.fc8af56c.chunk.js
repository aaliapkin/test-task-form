(this.webpackJsonpform=this.webpackJsonpform||[]).push([[0],{19:function(e,t,a){},22:function(e,t,a){},23:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(0),c=a.n(r),s=a(13),o=a.n(s),l=(a(19),a(2)),i=a.n(l),u=a(5),m=a(3),j=a(7),b=a(9),d=a(11),f=a(10),h=a.n(f);function g(){var e=new Date(Date.now());return function(e){var t=new Date(e);return("0"+t.getDate()).slice(-2)+"."+("0"+(t.getMonth()+1)).slice(-2)+"."+t.getFullYear()+" "+("0"+t.getHours()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)}(new Date(e.getFullYear(),e.getMonth(),e.getDate()+1,0,0).getTime())}function p(e){var t=e.match(/^(\d{2}).(\d{2}).(\d{4}) (\d{2}):(\d{2})$/);if(null!==t){var a=Object(m.a)(t,6),n=a[1],r=a[2],c=a[3],s=a[4],o=a[5],l=Date.parse("".concat(c,"-").concat(r,"-").concat(n,"T").concat(s,":").concat(o));if(!isNaN(l))return l}}var O=Object(r.forwardRef)((function(e,t){var a=e.value,r=e.onChange,c=e.name;return Object(n.jsx)(h.a,{name:c,value:a,mask:"99.99.9999 99:99",maskPlaceholder:"_",alwaysShowMask:!0,onChange:function(e){e.persist(),r(e.target.value)},children:function(e){e.maskPlaceholder;var t=Object(d.a)(e,["maskPlaceholder"]);return Object(n.jsx)("input",Object(b.a)({type:"text",name:t.name,className:"form-control"},t))}})}));var v=function(e){var t=e.name,a=(e.errors,e.control),r=c.a.useState(g()),s=Object(m.a)(r,2),o=s[0],l=s[1];return Object(n.jsx)(j.a,{as:Object(n.jsx)(O,{}),value:o,onChange:function(e){var t=Object(m.a)(e,1)[0];return l(t),{value:t}},rules:{validate:{inputTelRequired:function(e){return function(e){var t=p(e);if(void 0===t)return"\u041d\u0435\u0432\u0435\u0440\u043d\u0430\u044f \u0434\u0430\u0442\u0430";var a=new Date(Date.now());return!(new Date(t).getTime()<a.getTime())||"\u041d\u0435\u0432\u0435\u0440\u043d\u0430\u044f \u0434\u0430\u0442\u0430"}(e)}}},defaultValue:o,name:t,control:a})},x=Object(r.forwardRef)((function(e,t){var a=e.value,r=e.onChange,c=e.name;return Object(n.jsx)(h.a,{name:c,value:a,mask:"+7 (999) 999-9999",maskPlaceholder:"_",alwaysShowMask:!0,onChange:function(e){e.persist(),r(e.target.value)},children:function(e){e.maskPlaceholder;var t=Object(d.a)(e,["maskPlaceholder"]);return Object(n.jsx)("input",Object(b.a)({type:"text",name:t.name,className:"form-control"},t))}})}));var w=function(e){var t=e.name,a=(e.errors,e.control),r=c.a.useState(""),s=Object(m.a)(r,2),o=s[0],l=s[1];return Object(n.jsx)(j.a,{as:Object(n.jsx)(x,{}),value:o,onChange:function(e){var t=Object(m.a)(e,1)[0];return l(t),{value:t}},rules:{required:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0442\u0435\u043b\u0435\u0444\u043e\u043d"},defaultValue:o,name:t,control:a})},N=(a(22),function(e){var t=e.message;return Object(n.jsx)("div",{className:"form-group call-form__error",children:t})}),k=function(e){var t=Object(j.b)({reValidateMode:"onChange"}),a=t.handleSubmit,c=t.register,s=t.setError,o=t.clearErrors,l=t.errors,b=t.control,d=Object(r.useState)(!1),f=Object(m.a)(d,2),h=f[0],g=f[1],O=function(){var e=Object(u.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h){e.next=7;break}return g(!0),a={id:1,data:{phone:t.phone.trim().replace(/\D/g,"").replace(/^7/g,"+7"),date:p(t.date),comment:t.comment}},console.log(JSON.stringify(a)),fetch("https://interview.gazilla-lounge.ru/api/submit",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(e){return console.log(e)})).catch((function(){s("submit",{type:"double_send",message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0435 \u0444\u043e\u0440\u043c\u044b"}),setTimeout((function(){o("submit")}),3e3)})),e.next=7,new Promise((function(e){setTimeout((function(){g(!1),e()}),5e3)}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)("div",{className:"call-form__wrapper mx-auto container",children:Object(n.jsxs)("form",{onSubmit:a(O),className:"call-form",disabled:h,children:[Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"phone",children:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430"}),Object(n.jsx)(w,{name:"phone",errors:l,control:b})]}),l.phone?Object(n.jsx)(N,{message:l.phone.message}):"",Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"date",children:"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u043e\u0431\u0440\u0430\u0442\u043d\u043e\u0433\u043e \u0437\u0432\u043e\u043d\u043a\u0430"}),Object(n.jsx)(v,{name:"date",errors:l,control:b})]}),l.date?Object(n.jsx)(N,{message:l.date.message}):"",Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"comment",children:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u043a \u0437\u0430\u044f\u0432\u043a\u0435"}),Object(n.jsx)("textarea",{name:"comment",id:"comment",maxLength:"1024",rows:"6",ref:c({maxLength:{value:1024,message:"\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u0434\u043b\u0438\u043d\u043d\u044b\u0439 \u0442\u0435\u043a\u0441\u0442"}}),className:"form-control"})]}),l.comment?Object(n.jsx)(N,{message:l.comment.message}):"",Object(n.jsxs)("div",{className:"input-group mb-3",children:[Object(n.jsx)("div",{className:"input-group-prepend",children:Object(n.jsx)("div",{className:"input-group-text",children:Object(n.jsx)("input",{id:"agree",name:"agree",type:"checkbox",className:"checkbox",ref:c({required:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0441\u043e\u0433\u043b\u0430\u0441\u0438\u0442\u044c\u0441\u044f \u0441 \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435\u043c \u0443\u0441\u043b\u0443\u0433\u0438"})})})}),Object(n.jsx)("label",{htmlFor:"agree",className:"form-control",children:"\u0421\u043e\u0433\u043b\u0430\u0441\u0435\u043d \u0441 \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435\u043c \u0443\u0441\u043b\u0443\u0433\u0438"})]}),l.agree?Object(n.jsx)(N,{message:l.agree.message}):"",Object(n.jsx)("input",{type:"submit",className:"btn btn-primary",value:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0443",disabled:h}),l.submit?Object(n.jsx)(N,{message:l.submit.message}):""]})})};o.a.render(Object(n.jsx)(k,{}),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.fc8af56c.chunk.js.map